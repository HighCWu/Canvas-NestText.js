var fx=window.innerWidth;var fy=window.innerHeight;var CanvasArray=new Array();CanvasArray[0]=document.createElement("canvas");CanvasArray[0].style="position:absolute; top:0; left:0;";CanvasArray[0].width=window.innerWidth;CanvasArray[0].height=window.innerHeight;document.getElementsByTagName("body")[0].appendChild(CanvasArray[0]);!function(){function q(x,w,v){return x.getAttribute(w)||v}function n(v){return document.getElementsByTagName(v)}function o(){var v=n("script"),x=v.length,w=v[x-1];return{l:x,z:q(w,"zIndex",-1),o:q(w,"opacity",0.5),c:q(w,"color","0,0,0"),n:q(w,"count",99)}}function b(){f.clearRect(0,0,CanvasArray[1].width,CanvasArray[1].height);var w,v,z,A,y,x;l.forEach(function(C,B){C.x+=C.xa,C.y+=C.ya,C.xa*=C.x>CanvasArray[1].width||C.x<0?-1:1,C.ya*=C.y>CanvasArray[1].height||C.y<0?-1:1,f.fillRect(C.x-0.5,C.y-0.5,1,1);for(v=B+1;v<c.length;v++){w=c[v];if(null!==w.x&&null!==w.y){A=C.x-w.x;y=C.y-w.y;x=A*A+y*y;x<w.max&&(w===g&&x>=w.max/2&&(C.x-=0.03*A,C.y-=0.03*y),z=(w.max-x)/w.max,f.beginPath(),f.lineWidth=z/2,f.strokeStyle="rgba("+t.c+","+(z+0.2)+")",f.moveTo(C.x,C.y),f.lineTo(w.x,w.y),f.stroke())}}}),p(b)}var u=document.createElement("canvas"),t=o(),d="c_n"+t.l,f=u.getContext("2d"),p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(v,1000/45)},a=Math.random,g={x:null,y:null,max:20000},c;u.id=d;u.style.cssText="position:fixed;top:0;left:0;z-index:"+t.z+";opacity:"+t.o;CanvasArray[1]=u;CanvasArray[1].width=window.innerWidth;CanvasArray[1].height=window.innerHeight;window.onmousemove=function(v){v=v||window.event;g.x=v.clientX;g.y=v.clientY},window.onmouseout=function(){g.x=null;g.y=null};for(var l=[],r=0;t.n>r;r++){var m=a()*CanvasArray[1].width,h=a()*CanvasArray[1].height,s=2*a()-1,e=2*a()-1;l.push({x:m,y:h,xa:s,ya:e,max:6000})}c=l.concat([g]);setTimeout(function(){b()},100)}();function textToLine(H,p,n,K,J){var x={focus:4000,self:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},up:{x:0,y:1,z:0},zoom:1,display:{x:p,y:n,z:0}};var R={world:{size:function(X,s){return{x:X.x*s.x,y:X.y*s.y,z:X.z*s.z}},rotate:{x:function(X,s){return{x:X.x,y:X.y*Math.cos(v(s.x))-X.z*Math.sin(v(s.x)),z:X.y*Math.sin(v(s.x))+X.z*Math.cos(v(s.x))}},y:function(X,s){return{x:X.x*Math.cos(v(s.y))+X.z*Math.sin(v(s.y)),y:X.y,z:-X.x*Math.sin(v(s.y))+X.z*Math.cos(v(s.y))}},z:function(X,s){return{x:X.x*Math.cos(v(s.z))-X.y*Math.sin(v(s.z)),y:X.x*Math.sin(v(s.z))+X.y*Math.cos(v(s.z)),z:X.z}}},position:function(X,s){return{x:X.x+s.x,y:X.y+s.y,z:X.z+s.z}},},view:{point:function(s){return{x:s.x-x.self.x,y:s.y-x.self.y,z:s.z-x.self.z}},x:function(s){return{x:s.x,y:s.y*Math.cos(v(x.rotate.x))-s.z*Math.sin(v(x.rotate.x)),z:s.y*Math.sin(v(x.rotate.x))+s.z*Math.cos(v(x.rotate.x))}},y:function(s){return{x:s.x*Math.cos(v(x.rotate.y))+s.z*Math.sin(v(x.rotate.y)),y:s.y,z:s.x*-Math.sin(v(x.rotate.y))+s.z*Math.cos(v(x.rotate.y))}},viewReset:function(s){return{x:s.x-x.self.x,y:s.y-x.self.y,z:s.z-x.self.z}},righthandedReversal:function(s){return{x:s.x,y:-s.y,z:s.z,}}},perspective:function(s){return{x:s.x*((x.focus-x.self.z)/((x.focus-x.self.z)-s.z))*x.zoom,y:s.y*((x.focus-x.self.z)/((x.focus-x.self.z)-s.z))*x.zoom,z:s.z*((x.focus-x.self.z)/((x.focus-x.self.z)-s.z))*x.zoom,p:((x.focus-x.self.z)/((x.focus-x.self.z)-s.z))*x.zoom,}},display:function(X,s){return{x:X.x+s.x,y:X.y+s.y,z:X.z+s.z,p:X.p,}},process:function(Z,aa,Y,s,ab){var X=R.world.size(Z,aa);X=R.world.rotate.x(X,Y);X=R.world.rotate.y(X,Y);X=R.world.rotate.z(X,Y);X=R.world.position(X,s);X=R.view.point(X);X=R.view.x(X);X=R.view.y(X);X=R.view.viewReset(X);X=R.view.righthandedReversal(X);X=R.perspective(X);X=R.display(X,ab);return X}};var C=function(s){this.affineIn=new Object;this.affineOut=new Object;if(s.vertex!==undefined){this.affineIn.vertex=s.vertex}else{this.affineIn.vertex={x:0,y:0,z:0}}if(s.size!==undefined){this.affineIn.size=s.size}else{this.affineIn.size={x:1,y:1,z:1}}if(s.rotate!==undefined){this.affineIn.rotate=s.rotate}else{this.affineIn.rotate={x:0,y:0,z:0}}if(s.position!==undefined){this.affineIn.position=s.position}else{this.affineIn.position={x:0,y:0,z:0}}};C.prototype={vertexUpdate:function(){this.affineOut=R.process(this.affineIn.vertex,this.affineIn.size,this.affineIn.rotate,this.affineIn.position,x.display)}};var v=function(s){return s*Math.PI/180};var M=function(Z,Y,X){var s=Math.sin(v(Z))*Math.cos(v(Y))*X;var ab=Math.sin(v(Z))*Math.sin(v(Y))*X;var aa=Math.cos(v(Z))*X;return{x:ab,y:aa,z:s}};var r=function(ad,ac,ab){if(ad==0){var X=0.001}else{var X=ad}if(ac==0){var ae=0.001}else{var ae=ac}if(ab==0){var aa=0.001}else{var aa=ab}var Y=Math.sqrt(X*X+ae*ae+aa*aa);var s=Math.atan(aa/Math.sqrt(X*X+ae*ae));var Z=Math.atan(ae/X);return{x:s*(180/Math.PI),y:Z*(180/Math.PI),r:Y}};var m=function(s,X){this.flag=0;this.progress=0;this.startTime=0;this.durationTime=0;this.fromValue=0;this.toValue=0;this.minValue=0;this.maxValue=1;this.minDuration=s;this.maxDuration=X};m.prototype={init:function(){this.durationTime=this.minDuration+(this.maxDuration-this.minDuration)*Math.random();this.startTime=Date.now();this.progress=Math.min(1,((Date.now()-this.startTime)/this.durationTime));this.fromValue=this.toValue;this.toValue=this.minValue+this.maxValue*Math.random();this.flag=1;return this.fromValue+(this.toValue-this.fromValue)*this.progress},update:function(){this.progress=Math.min(1,((Date.now()-this.startTime)/this.durationTime));if(this.progress==1){this.flag=0}return this.fromValue+(this.toValue-this.fromValue)*this.progress},execution:function(){if(this.flag==0){return this.init()}else{if(this.flag==1){return this.update()}}}};var q="rgba(0,0,0,0.1)";var b="rgba(255,255,255,0)";var V=false;var g=document.createElement("canvas");CanvasArray.push(g);CanvasArray[CanvasArray.length-1].width=window.innerWidth;CanvasArray[CanvasArray.length-1].height=window.innerHeight;g.style="position:absolute; top:0; left:0;";var A=g.getContext("2d");A.strokeStyle=q;window.onresize=function(){x.display.x=p*window.innerWidth/fx;x.display.y=n*window.innerHeight/fy};CanvasArray.push(g);var B=function(s){this.flag=true;this.type="_";this.particleNum=s.particleNum;this.center={x:0,y:0,z:0};this.targetCenter=s.center;this.radius=0;this.targetRadius=s.radius;this.degree=new Array();this.freeDegreeSpeed=new Array();for(var aa=0;aa<this.particleNum;aa++){this.degree[aa]={theta:0,phi:0};this.freeDegreeSpeed[aa]={theta:1*Math.random()-0.5,phi:1*Math.random()-0.5}}this.charsMap=new Object();for(var ab in T){var X=U[ab].getContext("2d").getImageData(0,0,100,100).data;this.charsMap[ab]=new Array();var Z=this;for(var aa=0;aa<this.particleNum;aa++){var Y=function(){var ac=Math.floor(Math.random()*100);var ad=Math.floor(Math.random()*100);if(X[(ac*400+(ad*4))]==0){Z.charsMap[ab].push({theta:ac-50+360*Math.round(Math.random()*2)-1,phi:ad-50+360*Math.round(Math.random()*2)-1})}else{Y()}};Y()}}this.charsMap["@"]=new Array();for(var ab=0;ab<this.particleNum;ab++){this.charsMap["@"][ab]={theta:360*Math.random(),phi:360*Math.random()}}this.charsMap["_"]=new Array();for(var ab=0;ab<this.particleNum;ab++){this.charsMap["_"][ab]={theta:0,phi:0}}this.veticies=new Array();for(var ab=0;ab<this.particleNum;ab++){this.veticies[ab]=new C({})}};B.prototype={update:function(){for(var s=0;s<this.charsMap[this.type].length;s++){if(this.degree[s].theta>=30&&this.degree[s].phi>=30){this.flag=true;break}else{this.flag=false}}this.radius=this.radius+(this.targetRadius-this.radius)/8;this.center.x=this.center.x+(this.targetCenter.x-this.center.x)/8;this.center.y=this.center.y+(this.targetCenter.y-this.center.y)/8;this.center.z=this.center.z+(this.targetCenter.z-this.center.z)/8;for(var s=0;s<this.charsMap[this.type].length;s++){if(this.type==="@"){this.charsMap[this.type][s].theta+=this.freeDegreeSpeed[s].theta;this.charsMap[this.type][s].phi+=this.freeDegreeSpeed[s].phi}this.degree[s].theta=this.degree[s].theta+(this.charsMap[this.type][s].theta-this.degree[s].theta)/(4+20*Math.random());this.degree[s].phi=this.degree[s].phi+(this.charsMap[this.type][s].phi-this.degree[s].phi)/(4+20*Math.random());if(V==true){var X=M(this.degree[s].theta+90,this.degree[s].phi,this.radius+Math.random()*10)}else{var X=M(this.degree[s].theta+90,this.degree[s].phi,this.radius)}this.veticies[s].affineIn.vertex={x:X.x,y:X.y,z:X.z};this.center.x;this.veticies[s].affineIn.position={x:this.center.x,y:this.center.y,z:this.center.z};this.veticies[s].vertexUpdate()}},draw:function(){if(this.flag==true){A.beginPath();for(var X=0;X<this.veticies.length;X++){for(var s=X*5;s<this.veticies.length;s++){var Y=(this.veticies[X].affineOut.x-this.veticies[s].affineOut.x)*(this.veticies[X].affineOut.x-this.veticies[s].affineOut.x)+(this.veticies[X].affineOut.y-this.veticies[s].affineOut.y)*(this.veticies[X].affineOut.y-this.veticies[s].affineOut.y);if(Y<=this.radius*J){A.moveTo(this.veticies[X].affineOut.x,this.veticies[X].affineOut.y);A.lineTo(this.veticies[s].affineOut.x,this.veticies[s].affineOut.y)}}}A.closePath();A.stroke()}}};var c=20;var N=new Array();var l=function(){for(var s=0;s<c;s++){N[s]=new B({radius:H[0].sphereRadius,particleNum:K,center:{x:70*s-(c-1)*70/2,y:0,z:0}})}};var I=function(){for(var s=0;s<c;s++){N[s].update()}};var S=function(){for(var s=0;s<c;s++){N[s].draw()}};var O=document.createElement("canvas");O.width=100;O.height=100;var T=new Object();for(j in H){for(Q in H[j].text){if(O.getContext){var W=O.getContext("2d"),F=H[j].text[Q],E,L=50;function a(){W.fillStyle="#FFFFFF";W.fillRect(0,0,100,100);W.fillStyle="#000000";W.fillText(F,O.width/2,O.height/2);W.strokeText(F,O.width/2,O.height/2)}W.font="50px Helvetica";W.textBaseline="middle";W.textAlign="center";E=W.measureText(F);a();T[H[j].text[Q]]=O.toDataURL("image/png");W.clearRect(0,0,O.width,O.height)}}}var o=0;var d=0;var t={};var P={};for(var Q in T){o++;t[Q]=new Image();t[Q].src=T[Q];t[Q].onload=function(){d++;if(d===o){e()}}}var U=new Array();var e=function(){for(var X in T){var s=document.createElement("canvas");U[X]=s;s.getContext("2d").drawImage(t[X],0,0,100,100)}D()};var h=function(ad,X,aa,Z){var Y=0;var ae=ad.length;var s=new Array();for(var ab=0;ab<ae;ab++){s[ab]={x:aa*ab-aa*(ae-1)/2,y:0,z:0}}var ac=function(){setTimeout(function(){N[Y].type=ad[Y];N[Y].targetCenter=s[Y];N[Y].targetRadius=X;Y++;if(Y<ae){ac()}},Z)};for(var ab=ae;ab<N.length;ab++){N[ab].type="_"}ac()};var G=function(){var aa="";for(j in H){aa=aa+H[j].text}var s=10;var Z=80;var Y=120;for(var X=0;X<aa.length;X++){N[X].targetCenter={x:(X%10)*Z-(s-1)*Z/2,y:Math.floor(X/10)*-Y+180,z:0};N[X].type=aa[X]}};var y=H;var w=0;var z=function(){setTimeout(function(){h(y[w].text,y[w].sphereRadius,y[w].sphereSpace,y[w].unitTime);w++;if(w==y.length){w=0}if(y.length>0){z()}},y[w].time)};var f=new m(200,500);var u=new m(1000,1200);var D=function(){l();setInterval(function(){if(f.execution()>0.8){V=true}else{V=false}A.clearRect(0,0,window.innerWidth,window.innerHeight);A.fillStyle=b;A.fillRect(0,0,window.innerWidth,window.innerHeight);A.strokeStyle=q;I();S()},1000/60);z()}}window.onresize=function(){for(i in CanvasArray){CanvasArray[i].width=window.innerWidth;CanvasArray[i].height=window.innerHeight}};setInterval(function(){CanvasArray[0].getContext("2d").clearRect(0,0,window.innerWidth,window.innerHeight);for(var b=1;b<CanvasArray.length;b++){var a,c;if(CanvasArray[b].width!=null){a=CanvasArray[b].width}else{a=0}if(CanvasArray[b].height!=null){c=CanvasArray[b].height}else{c=0}CanvasArray[0].getContext("2d").drawImage(CanvasArray[b],0,0)}},1000/60);function removeTextLine(b){if(b!=null){if(b!=0){CanvasArray[b]=null;CanvasArray.splice(b,1)}}else{var a=CanvasArray[0];for(k in CanvasArray){if(k>0){CanvasArray[k]=null}}CanvasArray=new Array();CanvasArray[0]=a}};